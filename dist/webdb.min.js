/*! [webdb 0.5.0](http://download.github.io/webdb) Copyright 2015 by [Stijn de Witt](http://StijnDeWitt.com). Some rights reserved. License: [CC-BY-4.0](https://creativecommons.org/licenses/by/4.0/) */
!function(u,m,d){var a;if("function"==typeof define&&define.amd)define("webdb",require.defined("picolog")?["picolog"]:[],u.log&&u.log.INFO?function(){return d(log)}:d);else if("object"==typeof exports){try{require.resolve("picolog"),a=require("picolog")}catch(b){}module.exports=d(a)}else u[m]=d(u.log&&u.log.INFO&&u.log)}(this,"WebDB",function(a){"use strict";function WebDB(f,g){function h(c,f){function g(a){return a[J.definition.pk]}function h(a,b){return a="object"==typeof a?g(a):a,b="object"==typeof b?g(b):b,G(a,b)}function i(a,b){return a&&a.compare?a.compare(b):(b&&b.compare&&0-b.compare(a),b>a?-1:a>b?1:0)}function j(){var a,b={};for(a in J.definition.columns)(J.definition.columns[a].fk||J.definition.columns[a].unique||J.definition.columns[a].index)&&(b[a]=new e({unique:J.definition.columns[a].unique}));return b}function k(a){var b,c,e,f,h,i={},j={},k={},l=[],n=!0;Object(a)instanceof J.definition.columns[J.definition.pk].type&&(f=a,a={},a[J.definition.pk]=f);for(e in a)e===J.definition.pk?h=a[e]:L[e]?i[e]=a[e]:j[e]=a[e];for(h=void 0!==h?h instanceof Array?h:[h]:[],b=0;b<h.length;b++){for(h[b]=K.search(h[b]),c=0;c<h[b].length;c++)f=g(h[b][c]),k[f]=f;n=!1}for(e in i)for(i[e]=void 0!==i[e]?i[e]instanceof Array?i[e]:[i[e]]:[],b=0;b<i[e].length;b++){h=L[e].search(i[e][b]);var o={};for(c=0;c<h.length;c++)f=h[c],(n||k[f])&&(o[f]=f);k=o,n=!1}if(n)K.visit(function(a){l.push.apply(l,a.data)});else for(f in k){var p=K.search(k[f]);p.length&&l.push(p[0])}return Object.keys(j).length?I(l,j):l}function l(){var a=b(arguments,J,function(a){a instanceof J.definition.entityType||(a=J.definition.factory(a));var b=o(a);return p(a,b),[a]});return a}function o(a){var b,c,e=K.search(a);if(e.length){b=e[0],K.update(g(a),a);for(c in L)b[c]!=a[c]&&(L[c].remove(b[c]),L[c].insert(a[c],g(a)))}else{K.insert(g(a),a);for(c in L)L[c].insert(a[c],g(a))}return b}function p(a,b){var c;!f&&r.options.synch&&(c=H(O,a),-1!==c&&(b=O.splice(c,1)[0]),J.persistent(a)?(c=H(N,a),-1===c?N.push(b):J.db.synching&&(c=H(P,a),-1===c?P.push(a):P.splice(c,1,a))):(c=H(M,a),-1===c?M.push(a):M.splice(c,1,a),c=H(O,a),-1!==c&&O.splice(c,1)))}function q(){var a=b(arguments,J,function(a){var b=s(g(a));return b=v(a,b),[b||a]});return a}function s(a){var b,c,e=K.search(a);if(e.length){b=e[0],K.remove(a);for(c in L)L[c].remove(b[c])}return b}function v(a,b){var c,e,g;return!f&&r.options.synch&&(e=H(M,a),-1===e&&(c=H(N,a),-1!==c&&(g=N.splice(c,1)[0],b=b||g),c=H(P,a),-1!==c&&P.splice(c,1),c=H(O,a),-1===c&&O.push(b||a))),b}function w(a,b){if(void 0===b)return b;for(var c,e=[],f=0;c=a.columns[f];f++)e.push(b[c]);return e}function x(a,b){if(void 0===b)return b;for(var c,e={},f=0;c=a.columns[f];f++){var g=J.definition.columns[c];if(b[f]instanceof Array&&g&&g.type instanceof Array){var h=g.type[0];e[c]=[];for(var i=0;i<b[f].length;i++)e[c][i]=new h(b[f][i])}else g&&g.type&&g.type!==String&&g.type!==Number&&g.type!==Object&&(b[f]=new g.type(b[f])),e[c]=b[f]}return J.definition.factory(e)}function z(b){var e,f,g,h;for(f=0;g=x(b,b.created[f]);f++){o(g)||(e=!0);var h=H(M,g);-1!==h&&M.splice(h,1)}return a&&b.created.length&&a.debug(c+": Received "+b.created.length+" created items."),!!e}function A(b){var e,f,g,h,i,j,k;for(f=0;g=x(b,b.updated[f]);f++){if(h=H(P,g),-1!==h){j=P.splice(h,1)[0],h=H(N,g),-1!==h?N.splice(h,1,g):N.push(g);for(i in j)i!==J.definition.version&&(g[i]=j[i])}else h=H(N,g),-1!==h?N.splice(h,1):(h=H(O,g),-1!==h&&(k=O.splice(h,1)[0],-1===H(Q,k)&&Q.push(k))),e=!0;o(g)}return a&&b.updated.length&&a.debug(c+": Received "+b.updated.length+" updated items."),!!e}function B(b){var e,f,g,h;for(e=0;f=b.deletedIds[e];e++)s(f)&&(h=!0),g=H(O,f),-1!==g&&O.splice(g,1);return a&&b.deletedIds.length&&a.debug(c+": Received "+b.deletedIds.length+" deleted items."),!!h}function C(b){var e,f,g;for(e=0;f=x(b,b.stale[e]);e++)g=H(Q,f),-1===g?Q.push(f):Q.splice(g,1,f);a&&b.stale.length&&a.debug(c+": Received "+b.stale.length+" stale items.")}function D(b){var e,f,h,i;for(e=0;f=x(b,b.denied[e]);e++)i=H(R,f),-1===i?R.push(f):R.splice(i,1,f),i=H(M,f),-1===i?(i=H(N,f),h=N[i],s(g(f)),o(h)):(M.splice(i,1),s(g(f)));a&&b.denied.length&&a.debug(c+": Received "+b.denied.length+" denied items.")}function E(b){var e,f,g;for(e=0;f=x(b,b.failed[e]);e++)g=H(S,f),-1===g?S.push(f):S.splice(g,1,f);a&&b.failed.length&&a.debug(c+": Received "+b.failed.length+" failed items.")}function F(b){var e,f,g;for(e=0;f=b.purgedIds[e];e++)s(f)&&(g=!0);return a&&b.purgedIds.length&&a.debug(c+": Received "+b.purgedIds.length+" purged items."),!!g}function G(a,b){return a===b||a.equals&&a.equals(b)||b.equals&&b.equals(a)||"object"==typeof a&&void 0!==g(a)&&G(b,g(a))}function H(a,b,c){for(var e,f=0;e=a[f];f++)if(G(e,b,c))return f;return-1}function I(a,b){var c,e,f,g,h=0,i=new Array(a.length);for(c=0,e;e=a[c];c++){g=!0;for(f in b)if(Array.isArray&&Array.isArray(b[f])||b[f]instanceof Array){if(-1===H(b[f],e[f])){g=!1;break}}else if(!G(a[c][f],b[f])){g=!1;break}g&&(i[h++]=e)}return i.length=h,i}var J=this;Object.defineProperty(J,"db",{value:r}),Object.defineProperty(J,"name",{value:c}),Object.defineProperty(J,"definition",{enumerable:!0,get:function(){return y[c]}}),Object.defineProperty(J,"length",{enumerable:!0,get:function(){return K.keyCount()}}),Object.defineProperty(J,"synched",{enumerable:!0,get:function(){return!J.created||!(J.created.length||J.updated.length||J.deleted.length)}}),Object.defineProperty(J,"get",{get:function(){return function(a){return k(a)}}}),Object.defineProperty(J,"set",{get:function(){return function(a){return l(a)}}}),Object.defineProperty(J,"del",{get:function(){return function(){var a;return"function"==typeof arguments[arguments.length-1]&&(a=arguments[--arguments.length]),a?new Promise(function(a){a(q.apply(J,arguments))}):q.apply(J,arguments)}}}),f||(Object.defineProperty(J,"createSynchRequest",{get:function(){return function(){var a,b,c,e=[];for(c in J.definition.columns)e.push(c);var f={columns:e,ids:[],versions:[],created:[],updated:[],deleted:[]};for(a=0;b=J.created[a];a++)f.created.push(w(f,b));for(a=0;b=J.updated[a];a++)f.updated.push(w(f,b));for(a=0;b=J.deleted[a];a++)f.deleted.push(w(f,b));return K.visit(function(a){a.key&&(f.ids.push(a.key),f.versions.push(a.data[0][J.definition.version]))}),f}}}),Object.defineProperty(J,"processSynchResponse",{get:function(){return function(a){var b;return Q.splice(0,Q.length),R.splice(0,R.length),S.splice(0,S.length),T.splice(0,T.length),z(a)&&(b=!0),A(a)&&(b=!0),B(a)&&(b=!0),F(a)&&(b=!0),C(a),D(a),E(a),!!b}}}),Object.defineProperty(J,"created",{get:function(){return M.concat()}}),Object.defineProperty(J,"updated",{get:function(){return N.concat()}}),Object.defineProperty(J,"deleted",{get:function(){return O.concat()}}),Object.defineProperty(J,"future",{get:function(){return P.concat()}}),Object.defineProperty(J,"stale",{get:function(){return Q.concat()}}),Object.defineProperty(J,"denied",{get:function(){return R.concat()}}),Object.defineProperty(J,"failed",{get:function(){return S.concat()}}),Object.defineProperty(J,"reasons",{get:function(){return T.concat()}}));var K=new e({unique:!0,id:g,equals:h,compare:i,keyType:J.definition.columns[J.definition.pk]&&J.definition.columns[J.definition.pk].type||void 0}),L=j();if(!f){var M=[],N=[],O=[],P=[],Q=[],R=[],S=[],T=[];r.tables.set({name:c});for(var U in y[c].columns){var V={id:r.columns.length+1,name:U,table:c};V=n(V,t,y[c].columns[U]),r.columns.set(V)}}}function i(a){var b,c,e,f,g,h=Object.keys(x),i="";for(b=0;c=h[b];b++)if(a[c]){for(e="",f=0;g=["created","updated","deleted"][f];f++)a[c][g].length&&(e+=(e?", ":"")+a[c][g].length+" "+g);e&&(i+=(i?", ":"")+"`"+c+"`: "+e)}return i}function j(){this.lastSynched=A;var b,c,e=Object.keys(x),f="";for(b=0;c=e[b];b++)x[c].createSynchRequest&&(this[c]=x[c].createSynchRequest());a&&a.level<=a.INFO&&(f=i(this),a.info("Synching WebDB `"+r.name+"` "+(f?"("+f+")":"")+"...",this))}function k(a){for(var b,c,e=Object.keys(a),f=0;c=e[f];f++){var g=x[c]&&x[c].processSynchResponse;g&&g(a[c])&&(b=!0)}return b}function l(b){return new Promise(function(c,e){function f(){var a=new XMLHttpRequest;a.open("post",g.synchUrl,!0),a.setRequestHeader("Content-Type","application/json"),a.timeout=g.synchTimeout,a.addEventListener("readystatechange",h),a.addEventListener("error",j),a.addEventListener("timeout",j),a.send(JSON.stringify(b))}function h(){4===this.readyState&&(200===this.status?i.call(this):j.call(this))}function i(){l=0,c(JSON.parse(this.responseText))}function j(){switch(this.status){case 500:case 502:case 503:case 504:if(l>0){k();break}default:a&&a.error("WebDB `"+r.name+"`: Unable to synch with remote server.",this),l=0,e(this)}}function k(){l--,setTimeout(function(){f()},g.synchRetryWait*(g.synchRetryCount-l+1))}var l=g.synchRetryCount;f()})}function n(){var a,b,c,e,f,g=[].splice.call(arguments,0,1)[0]||{};for(a=0;c=arguments[a];a++)for(Array.isArray(c)||(c=[c]),b=0;e=c[b];b++)for(f in e)g[f]=e[f];return g}function o(a,b,c){a||(a=s),a.columns||(a={columns:a,entityType:b||Object});var e,f;for(var g in a.columns){if(("function"==typeof a.columns[g]||a.columns[g]instanceof Array)&&(a.columns[g]={type:a.columns[g]}),a.columns[g].pk){if(e)throw new Error("Multiple primary key columns found in table definition: `"+e+"` and `"+g+"`.");e=g}if(a.columns[g].version){if(f)throw new Error("Multiple version columns found in table definition: `"+f+"` and `"+g+"`.");f=g}}if(!e)throw new Error("No primary key column found in table definition.");if(r.options.synch&&!c&&!f)throw new Error("Synch is enabled, but no version column found in table definition.");return a.pk=e,f&&(a.version=f),a}function p(a,b,c,e){y[b]=n(y[b]||{},s,o(c,a,e)),Object.defineProperty(r,b,{configurable:!0,enumerable:!0,writable:!1,value:x[b]=new h(b,e)})}var q={synch:!1,synchUrl:"/api/webdb/synch",synchAuto:!0,synchThrottleMs:6e4,synchPollMs:36e5,synchTimeout:1e4,synchRetryCount:2,synchRetryWait:5e3};if(f=f||"webdb",c[f])return c[f];if(!(this instanceof WebDB))return new WebDB(f,g);g=n({},q,g);var r=c[f]=this;Object.defineProperty(r,"name",{enumerable:!1,value:f}),Object.defineProperty(r,"options",{enumerable:!1,get:function(){return n({},g)}}),Object.defineProperty(r,"synching",{enumerable:!1,get:function(){return z}}),Object.defineProperty(r,"lastSynched",{enumerable:!1,get:function(){return A}}),Object.defineProperty(r,"synched",{enumerable:!1,get:function(){if(0===r.lastSynched.getTime())return!1;for(var a in x)if(x[a].synched===!1)return!1;return!0}}),Object.defineProperty(r,"upToDate",{enumerable:!1,get:function(){return Date.now()<A.getTime()+g.synchPollMs}}),Object.defineProperty(r,"synchError",{enumerable:!1,get:function(){return B}}),Object.defineProperty(r,"createTable",{enumerable:!1,get:function(){return function(a,b,c){if("string"==typeof a&&(c=b,b=a,a=void 0),x[b])throw new Error("A table named `"+b+"` already exists. Use alterTable() to change it's definition, or dropTable() to remove it.");return p(a,b,c,!1),x[b]}}}),Object.defineProperty(r,"dropTable",{enumerable:!1,get:function(){return function(b){return x[b]?(delete r[b],delete x[b],void delete y[b]):void(a&&a.warn("Call to dropTable() is ignored.",new Error("No table named `"+b+"` exists.")))}}}),Object.defineProperty(r,"synch",{enumerable:!1,get:function(){return function b(c){return z?z:(!C&&g.synchAuto&&(C=setInterval(b,g.synchThrottleMs)),B=!1,z=new Promise(function(b,e){if(!c&&r.synched&&r.upToDate)return void setTimeout(function(){z=!1,b()},0);try{var f=new j;l(f).then(function(c){var e=k(c);A=new Date,z=!1,e&&a&&a.debug("WebDB `"+r.name+"` changed. Triggering change..."),a&&a.debug("WebDB `"+r.name+"` triggering success...."),b(),a&&a.debug("WebDB `"+r.name+"` triggering done...."),a&&a.debug("WebDB `"+r.name+"` synch done."),a&&a.debug("WebDB `"+r.name+"` synched succesfully.")},function(b){a&&a.warn("WebDB `"+r.name+"` failed to synch with remote server.",b),B=b,z=!1,e(b)})["catch"](function(b){a&&a.error("WebDB `"+r.name+"` failed to process synch response from remote server.",b),B=b,z=!1,e(b)})}catch(g){a&&a.error("WebDB `"+r.name+"` had an error during synching.",g),B=g,z=!1,e(g)}}))}}}),h.prototype.persistent=function(a){return null!==a[this.definition.version]&&void 0!==a[this.definition.version]},h.prototype.toJSON=function(){},h.fromJSON=function(){};var s={columns:{id:{type:Number,pk:!0}},entityType:Object,factory:function(a){return new this.entityType(a)}},t={type:void 0,length:0,notnull:!1,pk:!1,fk:void 0,unique:!1,index:!1},v={columns:{name:{type:String,length:32,pk:!0}}},w={columns:{id:{type:Number,pk:!0},name:{type:String,length:32,index:!0},table:{type:String,length:32,notnull:!0,fk:"tables"},type:Function,length:Number,notnull:Boolean,pk:Boolean,fk:{type:String,length:32},unique:Boolean,index:Boolean}},x={},y={},z=!1,A=new Date(0),B=null,C=!1;p(void 0,"tables",v,!0),p(void 0,"columns",w,!0),r.tables.set({name:"tables"},{name:"columns"});for(var D in v.columns)r.columns.set(n({id:r.columns.length+1,name:D,table:"tables"},v.columns[D]));for(var D in w.columns)r.columns.set(n({id:r.columns.length+1,name:D,table:"columns"},w.columns[D]));return r}function b(a,c,e){if("length"in a&&a.length&&a[a.length-1]){for(var f,g=[],h=0;f=a[h];h++)g.push.apply(g,b(f,c,e));return g}return e.call(c,a)}a&&a.info("Found optional dependency `picolog`. Logging is enabled.");var c={},e=WebDB.Index=function(){function a(a,b){return b>a?-1:a>b?1:0}function b(a,b){return a===b}function c(c){this.root=new e(this,c),this.unique=c&&c.unique||!1,this.compare=c&&c.compare||a,this.equals=c&&c.equals||b,this.keyType=c&&c.keyType||void 0,this.id=c&&c.id||void 0}function e(a,b){this.tree=a,b&&b.parent&&(this.parent=b.parent),b&&b.hasOwnProperty("key")&&(this.key=b.key),this.data=b&&b.hasOwnProperty("value")?[b.value]:[]}function f(a,b){return b.hasOwnProperty("$gt")||b.hasOwnProperty("$gte")?b.hasOwnProperty("$gt")&&b.hasOwnProperty("$gte")?0===a(b.$gte,b.$gt)?function(c){return a(c,b.$gt)>0}:a(b.$gte,b.$gt)>0?function(c){return a(c,b.$gte)>=0}:function(c){return a(c,b.$gt)>0}:b.hasOwnProperty("$gt")?function(c){return a(c,b.$gt)>0}:function(c){return a(c,b.$gte)>=0}:function(){return!0}}function g(a,b){return b.hasOwnProperty("$lt")||b.hasOwnProperty("$lte")?b.hasOwnProperty("$lt")&&b.hasOwnProperty("$lte")?0===a(b.$lte,b.$lt)?function(c){return a(c,b.$lt)<0}:a(b.$lte,b.$lt)<0?function(c){return a(c,b.$lte)<=0}:function(c){return a(c,b.$lt)<0}:b.hasOwnProperty("$lt")?function(c){return a(c,b.$lt)<0}:function(c){return a(c,b.$lte)<=0}:function(){return!0}}function h(a,b,c,e){var i=[];return a.hasOwnProperty("key")?(c=c||f(a.tree.compare,b),e=e||g(a.tree.compare,b),c(a.key)&&a.left&&i.push.apply(i,h(a.left,b,c,e)),c(a.key)&&e(a.key)&&i.push.apply(i,a.data),e(a.key)&&a.right&&i.push.apply(i,h(a.right,b,c,e)),i):i}function i(a){return(a.left?a.left.height:0)-(a.right?a.right.height:0)}function j(a){var b,c,e,f,g=a,h=a.left;return h?(b=h.right,g.parent?(h.parent=g.parent,g.parent.left===g?g.parent.left=h:g.parent.right=h):h.parent=null,h.right=g,g.parent=h,g.left=b,b&&(b.parent=g),c=h.left?h.left.height:0,e=b?b.height:0,f=g.right?g.right.height:0,g.height=Math.max(e,f)+1,h.height=Math.max(c,g.height)+1,h):g}function k(a){var b,c,e,f,g=a,h=a.right;return h?(b=h.left,g.parent?(h.parent=g.parent,g.parent.left===g?g.parent.left=h:g.parent.right=h):h.parent=null,h.left=g,g.parent=h,g.right=b,b&&(b.parent=g),c=g.left?g.left.height:0,e=b?b.height:0,f=h.right?h.right.height:0,g.height=Math.max(c,e)+1,h.height=Math.max(f,g.height)+1,h):g}function l(a){return i(a)<=1?a:(i(a.left)<0&&k(a.left),j(a))}function n(a){return i(a)>=-1?a:(i(a.right)>0&&j(a.right),k(a))}function o(a,b){var c,e,f=a;if(!a.hasOwnProperty("key"))return delete a.height,a;for(e=b.length-1;e>=0;e-=1)b[e].height=1+Math.max(b[e].left?b[e].left.height:0,b[e].right?b[e].right.height:0),i(b[e])>1&&(c=l(b[e]),0===e&&(f=c)),i(b[e])<-1&&(c=n(b[e]),0===e&&(f=c));return f}return c.prototype.insert=function(a,b){this.root=this.root.insert(a,b)},c.prototype.remove=function(a,b){this.root=this.root.remove(a,b)},["update","keyCount","search","visit"].forEach(function(a){c.prototype[a]=function(){return this.root[a].apply(this.root,arguments)}}),e.prototype.insert=function(a,b){var c=[],e=this;if(!this.hasOwnProperty("key"))return this.key=a,this.data.push(b),this.height=1,this;for(;;){if(0===this.tree.compare(e.key,a)){if(this.tree.unique)throw new Error("Can't insert key "+a+", it violates the unique constraint.");return e.data.push(b),this}if(c.push(e),this.tree.compare(a,e.key)<0){if(!e.left){e.left=new e.constructor(e.tree,{parent:e,key:a,value:b}),c.push(e.left);break}e=e.left}else{if(!e.right){e.right=new e.constructor(e.tree,{parent:e,key:a,value:b}),c.push(e.right);break}e=e.right}}return o(this,c)},e.prototype.update=function(a,b){if(!this.hasOwnProperty("key"))throw new Error("Can't update value ["+b+"] for key ["+a+"]. Key does not exist.");for(var c=this;;){if(0===this.tree.compare(c.key,a)){for(var e,f=-1,g=0;e=c.data[g];g++)if(this.tree.equals(e,b)){f=g;break}if(-1==f)throw new Error("Can't update value ["+b+"] for key ["+a+"]. Value is not present.");return c.data.splice(f,1,b),this}if(this.tree.compare(a,c.key)<0){if(!c.left)throw new Error("Can't update value ["+b+"] for key ["+a+"]. Key does not exist.");c=c.left}else{if(!c.right)throw new Error("Can't update value ["+b+"] for key ["+a+"]. Key is not present.");c=c.right}}},e.prototype.remove=function(a,b){var c,e=[],f=this,g=[];if(!this.hasOwnProperty("key"))return this;for(;;){if(0===this.tree.compare(a,f.key))break;if(g.push(f),this.tree.compare(a,f.key)<0){if(!f.left)return this;f=f.left}else{if(!f.right)return this;f=f.right}}if(f.data.length>1&&b)return f.data.forEach(function(d){this.tree.equals(d,b)||e.push(d)}),f.data=e,this;if(!f.left&&!f.right)return f===this?(delete f.key,f.data=[],delete f.height,this):(f.parent.left===f?f.parent.left=null:f.parent.right=null,o(this,g));if(!f.left||!f.right)return c=f.left?f.left:f.right,f===this?(c.parent=null,c):(f.parent.left===f?(f.parent.left=c,c.parent=f.parent):(f.parent.right=c,c.parent=f.parent),o(this,g));if(g.push(f),c=f.left,!c.right)return f.key=c.key,f.data=c.data,f.left=c.left,c.left&&(c.left.parent=f),o(this,g);for(;;){if(!c.right)break;g.push(c),c=c.right}return f.key=c.key,f.data=c.data,c.parent.right=c.left,c.left&&(c.left.parent=c.parent),o(this,g)},e.prototype.keyCount=function(){if(!this.hasOwnProperty("key"))return 0;var a=1;return this.left&&(a+=this.left.keyCount()),this.right&&(a+=this.right.keyCount()),a},e.prototype.search=function(a){if(!this.hasOwnProperty("key"))return[];var b,c=this.tree.keyType;if("object"!=typeof a||c&&a instanceof c&&c!==String&&c!==Number)b=a;else{if(a.hasOwnProperty("$gt")||a.hasOwnProperty("$gte")||a.hasOwnProperty("$lt")||a.hasOwnProperty("$lte"))return h(this,a);this.tree.id&&(b=this.tree.id(a))}return void 0===b?[]:0===this.tree.compare(b,this.key)?this.data:this.tree.compare(b,this.key)<0?this.left?this.left.search(b):[]:this.right?this.right.search(b):[]},e.prototype.visit=function(a){this.left&&this.left.visit(a),a(this),this.right&&this.right.visit(a)},c}();return WebDB});
//# sourceMappingURL=webdb.min.js.map